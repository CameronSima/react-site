/*istanbul ignore next*/'use strict'; /* istanbul ignore next */var __cov_UQKaIm19F5HubBMU9ADymGc0m1I = function () {var path = '/home/cameron/Projects/react-site/src/components/Comment/CommentList.js',hash = '54f8364a922c7a088e965fead8f4f33ceacabaf9',global = new Function('return this')(),gcv = '__coverage__',coverageData = { path: '/home/cameron/Projects/react-site/src/components/Comment/CommentList.js', statementMap: { '1': { start: { line: 3, column: 191 }, end: { line: 3, column: 245 } }, '2': { start: { line: 5, column: 14 }, end: { line: 5, column: 38 } }, '3': { start: { line: 6, column: 13 }, end: { line: 6, column: 39 } }, '4': { start: { line: 12, column: 38 }, end: { line: 67, column: 6 } }, '5': { start: { line: 14, column: 4 }, end: { line: 14, column: 39 } }, '6': { start: { line: 17, column: 4 }, end: { line: 19, column: 5 } }, '7': { start: { line: 18, column: 6 }, end: { line: 18, column: 13 } }, '8': { start: { line: 20, column: 4 }, end: { line: 32, column: 11 } }, '9': { start: { line: 31, column: 8 }, end: { line: 31, column: 80 } }, '10': { start: { line: 38, column: 4 }, end: { line: 63, column: 62 } }, '11': { start: { line: 71, column: 42 }, end: { line: 116, column: 6 } }, '12': { start: { line: 73, column: 19 }, end: { line: 73, column: 38 } }, '13': { start: { line: 74, column: 26 }, end: { line: 74, column: 52 } }, '14': { start: { line: 75, column: 4 }, end: { line: 115, column: 5 } }, '15': { start: { line: 76, column: 25 }, end: { line: 105, column: 8 } }, '16': { start: { line: 77, column: 20 }, end: { line: 77, column: 59 } }, '17': { start: { line: 78, column: 19 }, end: { line: 78, column: 28 } }, '18': { start: { line: 80, column: 8 }, end: { line: 84, column: 9 } }, '19': { start: { line: 81, column: 22 }, end: { line: 81, column: 29 } }, '20': { start: { line: 83, column: 22 }, end: { line: 83, column: 31 } }, '21': { start: { line: 86, column: 20 }, end: { line: 87, column: 34 } }, '22': { start: { line: 89, column: 8 }, end: { line: 101, column: 27 } }, '23': { start: { line: 106, column: 6 }, end: { line: 108, column: 25 } }, '24': { start: { line: 112, column: 6 }, end: { line: 113, column: 125 } }, '25': { start: { line: 119, column: 0 }, end: { line: 119, column: 29 } } }, fnMap: { '1': { name: '_interopRequireDefault', decl: { start: { line: 3, column: 162 }, end: { line: 3, column: 184 } }, loc: { start: { line: 3, column: 190 }, end: { line: 3, column: 246 } } }, '2': { name: 'getInitialState', decl: { start: { line: 13, column: 52 }, end: { line: 13, column: 67 } }, loc: { start: { line: 13, column: 70 }, end: { line: 15, column: 3 } } }, '3': { name: 'sendLikeToServer', decl: { start: { line: 16, column: 53 }, end: { line: 16, column: 69 } }, loc: { start: { line: 16, column: 87 }, end: { line: 34, column: 3 } } }, '4': { name: 'success', decl: { start: { line: 27, column: 48 }, end: { line: 27, column: 55 } }, loc: { start: { line: 27, column: 62 }, end: { line: 29, column: 7 } } }, '5': { name: 'error', decl: { start: { line: 30, column: 46 }, end: { line: 30, column: 51 } }, loc: { start: { line: 30, column: 70 }, end: { line: 32, column: 7 } } }, '6': { name: 'render', decl: { start: { line: 36, column: 43 }, end: { line: 36, column: 49 } }, loc: { start: { line: 36, column: 52 }, end: { line: 67, column: 3 } } }, '7': { name: 'onClick', decl: { start: { line: 48, column: 56 }, end: { line: 48, column: 63 } }, loc: { start: { line: 48, column: 66 }, end: { line: 48, column: 170 } } }, '8': { name: 'onClick', decl: { start: { line: 51, column: 56 }, end: { line: 51, column: 63 } }, loc: { start: { line: 51, column: 66 }, end: { line: 51, column: 168 } } }, '9': { name: 'render', decl: { start: { line: 72, column: 43 }, end: { line: 72, column: 49 } }, loc: { start: { line: 72, column: 52 }, end: { line: 116, column: 3 } } }, '10': { name: '(anonymous_10)', decl: { start: { line: 76, column: 49 }, end: { line: 76, column: 50 } }, loc: { start: { line: 76, column: 68 }, end: { line: 105, column: 7 } } } }, branchMap: { '1': { loc: { start: { line: 3, column: 198 }, end: { line: 3, column: 244 } }, type: 'cond-expr', locations: [{ start: { line: 3, column: 222 }, end: { line: 3, column: 225 } }, { start: { line: 3, column: 228 }, end: { line: 3, column: 244 } }] }, '2': { loc: { start: { line: 3, column: 198 }, end: { line: 3, column: 219 } }, type: 'binary-expr', locations: [{ start: { line: 3, column: 198 }, end: { line: 3, column: 201 } }, { start: { line: 3, column: 205 }, end: { line: 3, column: 219 } }] }, '3': { loc: { start: { line: 17, column: 4 }, end: { line: 19, column: 5 } }, type: 'if', locations: [{ start: { line: 17, column: 4 }, end: { line: 19, column: 5 } }, { start: { line: 17, column: 4 }, end: { line: 19, column: 5 } }] }, '4': { loc: { start: { line: 75, column: 4 }, end: { line: 115, column: 5 } }, type: 'if', locations: [{ start: { line: 75, column: 4 }, end: { line: 115, column: 5 } }, { start: { line: 75, column: 4 }, end: { line: 115, column: 5 } }] }, '5': { loc: { start: { line: 80, column: 8 }, end: { line: 84, column: 9 } }, type: 'if', locations: [{ start: { line: 80, column: 8 }, end: { line: 84, column: 9 } }, { start: { line: 80, column: 8 }, end: { line: 84, column: 9 } }] } }, s: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 0, '15': 0, '16': 0, '17': 0, '18': 0, '19': 0, '20': 0, '21': 0, '22': 0, '23': 0, '24': 0, '25': 0 }, f: { '1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0 }, b: { '1': [0, 0], '2': [0, 0], '3': [0, 0], '4': [0, 0], '5': [0, 0] } },coverage = global[gcv] || (global[gcv] = {});if (coverage[path] && coverage[path].hash === hash) {return coverage[path];}coverageData.hash = hash;return coverage[path] = coverageData;}();var /*istanbul ignore next*/_react = require('react'); /*istanbul ignore next*/var _react2 = _interopRequireDefault(_react);

var /*istanbul ignore next*/_ReplyModal = require('../Modal/ReplyModal'); /*istanbul ignore next*/var _ReplyModal2 = _interopRequireDefault(_ReplyModal);function _interopRequireDefault(obj) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['1'];++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['1'];return (/* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['2'][0], obj) && /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['2'][1], obj.__esModule) ? /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['1'][0], obj) : /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['1'][1], { default: obj }));}

var helpers = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['2'], require('../../helpers'));
var config = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['3'], require('../../../config'));

// Comment component combined with CommentList to prevent
// circular import because they instantiate each other
// recursively

var Comment = /* istanbul ignore next */( /*istanbul ignore next*/++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['4'], _react2.default.createClass({ /*istanbul ignore next*/displayName: 'Comment',
  getInitialState: function /*istanbul ignore next*/getInitialState() {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['2'];++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['5'];
    return { vote: '', likesCount: 0 };
  },
  sendLikeToServer: function /*istanbul ignore next*/sendLikeToServer(thread_id, vote) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['3']; /*istanbul ignore next*/var _this = this; /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['6'];
    if (this.state.vote === vote) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['3'][0];++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['7'];
      return;
    } else /* istanbul ignore next */{++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['3'][1];}++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['8'];
    $.ajax({
      url: config.apiUrl + vote + '/comment/' + thread_id,
      xhrFields: { withCredentials: true },
      type: 'POST',
      dataType: 'json',
      cache: false,
      //data: {thread_id: thread_id},
      success: function /*istanbul ignore next*/success(data) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['4'];
        /*istanbul ignore next*/_this.setState({ likesCount: data });
      },
      error: function /*istanbul ignore next*/error(xhr, status, err) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['5'];++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['9'];
        console.log( /*istanbul ignore next*/_this.url, status, err.toString());
      } });

  },

  render: function /*istanbul ignore next*/render() {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['6']; /*istanbul ignore next*/var _this2 = this; /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['10'];

    return (
      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'div', /*istanbul ignore next*/{ className: 'comment', style: this.props.style },
      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'span', /*istanbul ignore next*/null,
      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'a', /*istanbul ignore next*/{ className: 'commentAuthor' }, this.props.author.username),
      ' ' + this.props.text),

      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'br', /*istanbul ignore next*/null),
      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'div', /*istanbul ignore next*/{ className: 'commentActions' },
      this.props.likes,
      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'a', /*istanbul ignore next*/{ className: 'dislikeLink',
        onClick: function /*istanbul ignore next*/onClick() {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['7']; /*istanbul ignore next*/_this2.sendLikeToServer( /*istanbul ignore next*/_this2.props.id, 'downvote');} }, /*istanbul ignore next*/'Dislike'),

      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'a', /*istanbul ignore next*/{ className: 'likeLink',
        onClick: function /*istanbul ignore next*/onClick() {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['8']; /*istanbul ignore next*/_this2.sendLikeToServer( /*istanbul ignore next*/_this2.props.id, 'upvote');} }, /*istanbul ignore next*/'Like'),

      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/_ReplyModal2.default, /*istanbul ignore next*/{ OP: this.props.author.username,
        thread: this.props.threadId,
        parent: this.props.id,
        onCommentSubmit: this.props.onCommentSubmit }),

      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'span', /*istanbul ignore next*/{ className: 'timestamp' }, helpers.formatDate(this.props.date).relative)),

      /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'div', /*istanbul ignore next*/{ className: 'replies' },
      /*istanbul ignore next*/_react2.default.createElement(CommentList, /*istanbul ignore next*/{ comments: this.props.replies,
        threadId: this.props.threadId,
        onCommentSubmit: this.props.onCommentSubmit }))));



  } }));



var CommentList = /* istanbul ignore next */( /*istanbul ignore next*/++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['11'], _react2.default.createClass({ /*istanbul ignore next*/displayName: 'CommentList',
  render: function /*istanbul ignore next*/render() {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['9'];
    var threadId = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['12'], this.props.threadId);
    var onCommentSubmit = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['13'], this.props.onCommentSubmit); /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['14'];
    if (this.props.comments) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['4'][0];
      var commentNodes = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['15'], this.props.comments.map(function (comment) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.f['10'];
        var depth = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['16'], comment.ancestors.split('#').length - 2);
        var even = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['17'], depth % 2); /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['18'];

        if (even) {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['5'][0];
          var color = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['19'], 'white');
        } else {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['5'][1];
          var color = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['20'], '#F1F1F1');
        }

        var style = /* istanbul ignore next */(++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['21'], {
          backgroundColor: color }); /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['22'];

        return (
          /*istanbul ignore next*/_react2.default.createElement(Comment, /*istanbul ignore next*/{ threadId: threadId,
            style: style,
            author: comment.author,
            text: comment.text,
            likes: comment.likes,
            date: comment.date,
            id: comment._id,
            replies: comment.replies,
            key: comment._id,
            onCommentSubmit: onCommentSubmit },

          comment.text));



      })); /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['23'];
      return (
        /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'div', /*istanbul ignore next*/{ className: 'commentList' },
        commentNodes));


    } else {/* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.b['4'][1];++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['24'];
      return (
        /*istanbul ignore next*/_react2.default.createElement( /*istanbul ignore next*/'div', /*istanbul ignore next*/null));

    }
  } })); /* istanbul ignore next */++__cov_UQKaIm19F5HubBMU9ADymGc0m1I.s['25'];


module.exports = CommentList;